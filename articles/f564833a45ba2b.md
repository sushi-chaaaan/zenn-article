---
title: "HonoでCloudflare Workers / Pagesをシームレスを連携する"
emoji: "🔥"
type: "tech"
topics: [ "Cloudflare", "CloudflarePages", "CloudflareWorkers", "Hono"]
published: false
---

こんにちは、すし([@sushi-chan](https://zenn.dev/sushichaaaan))です。電気通信大学で学生をしています。

最近はCloudflare PagesとCloudflare Workersを連携させてフルスタックWebアプリを動かす方法を模索しています。

:::details 作業用スクラップ
@[card](https://zenn.dev/sushichaaaan/scraps/f880564e9d6403)
:::

---

Cloudflare PagesはRemixやNext.js[^1] などのフレームワークにも対応しており、単体でも十分にWebアプリケーションを動かすことができます。

[^1]: [@cloudflare/next-on-pages](https://github.com/cloudflare/next-on-pages)を使うことで、ローカル環境でのエミュレーションも含めて対応できる。

しかし、ここ1年ほどの間にWorkersがTCP接続をサポートしたり、PagesがMonorepoをサポートしたりと大幅な機能拡充が行われてきました。

そこで、今回Honoでフロントエンドとバックエンドを接続することで、Cloudflare Pages/Workersをシームレスに接続できないか試してみたところ動いたので、記事にまとめてみました。

## 構成の詳細

@[figma](https://www.figma.com/file/0G1WPjQpdySKBhBsMR8aMl/Workers-Pages-Connect?type=whiteboard&node-id=0%3A1&t=INSAv3hwRCoZ161Q-1)

フロントエンドをCloudflare Pages、バックエンドをCloudflare Workersで構成し、それらをService Bindingsで接続する構成を取っています。

Service BindingsはCloudflare Workersの特徴的な機能の1つで、複数のWorkerをCloudflareの内部ネットワークで接続して低遅延かつセキュアな連携ができます。

@[card](https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings)

これを利用することで、フロントエンドからバックエンドのAPIを呼び出すところまではできます。しかし、このままでは開発者体験があまりよくありません。

**ということで、Honoの登場です。**

## Honoでもっとシームレスに

Honoとは: [@yusukebe](https://zenn.dev/yusukebe)さんが開発しているWebアプリケーションのためのフレームワークです。
Cloudflare Workersをはじめとしたエッジランタイムでの動作を想定して設計されており、特にCloudflare Workersとの相性はバツグンです。

@[card](https://zenn.dev/yusukebe/articles/0c7fed0949e6f7)
